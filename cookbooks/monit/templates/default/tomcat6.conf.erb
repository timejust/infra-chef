#
#  tomcat6 configuration file
#  Generated by Chef for <%= node[:fqdn] %>
#  Local modifications will be overwritten.
#

check process tomcat with pidfile /var/run/tomcat6.pid
	start program = "/etc/init.d/tomcat6 start"
	stop program  = "/etc/init.d/tomcat6 stop"
	if cpu > 60% for 2 cycles then alert
    if cpu > 80% for 5 cycles then restart
    if totalmem > 50% for 2 cycles then alert
    if totalmem > 60% for 5 cycles then restart
	if failed host 127.0.0.1 port 8080 then alert
	if failed host 127.0.0.1 port 8080 for 5 cycles then restart
	if 5 restarts within 5 cycles then timeout


