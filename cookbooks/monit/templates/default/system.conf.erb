#
#  System configuration file
#  Generated by Chef for <%= node[:fqdn] %>
#  Local modifications will be overwritten.
#

check system <%= node[:hostname] %>
  if loadavg (5min) > <%= [node[:cpu][:total].to_i * 2] %> then alert
  if loadavg (15min) > <%= [node[:cpu][:total].to_i] %> then alert
  if memory usage > 85% then alert
  if cpu usage (user) > 80% then alert
  if cpu usage (system) > 30% then alert
  if cpu usage (wait) > 20% then alert
 
check filesystem rootfs with path /
  if space > 75 percent then alert
  
check filesystem log with path /var/log
  if space > 75 percent then alert
  
check filesystem www with path /var/www
  if space > 75 percent then alert  
  